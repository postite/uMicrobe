<?php
/**
 * Generated by Haxe 4.0.0 (git build development @ da28365)
 * Haxe source file: /Users/ut/Documents/LAB/ufront-mvc/src/ufront/remoting/RemotingSerializer.hx
 */

namespace ufront\remoting;

use \haxe\ds\StringMap;
use \php\Boot;
use \haxe\Serializer;

/**
 * The RemotingSerializer is almost identical to the normal `Unserializer`, except that is designed to handle some extra features for Ufront remoting.
 * In particular, it can attach `UFFileUpload` objects to the HTTP Request, so that `UFUnserializer` can access them.
 */
class RemotingSerializer extends Serializer {
	/**
	 * @var RemotingDirection
	 * The direction the request is heading.
	 * If `RemotingDirection.RDClientToServer`, then
	 */
	public $direction;
	/**
	 * @var StringMap
	 * Files that should be uploaded with the current request.
	 * Any `UFFileUpload` that uses custom serialization will add itself to this map, and `ufront.remoting.HttpConnection` or `ufront.remoting.HttpAsyncConnection` will then know to attach the files.
	 */
	public $uploads;


	/**
	 * @param mixed $obj
	 * @param RemotingDirection $direction
	 * 
	 * @return string
	 */
	static public function run ($obj = null, $direction = null) {
		#/Users/ut/Documents/LAB/ufront-mvc/src/ufront/remoting/RemotingSerializer.hx:33: characters 3-47
		$s = new RemotingSerializer($direction);
		#/Users/ut/Documents/LAB/ufront-mvc/src/ufront/remoting/RemotingSerializer.hx:34: characters 3-21
		$s->serialize($obj);
		#/Users/ut/Documents/LAB/ufront-mvc/src/ufront/remoting/RemotingSerializer.hx:35: characters 3-22
		return $s->toString();
	}


	/**
	 * @param RemotingDirection $dir
	 * 
	 * @return void
	 */
	public function __construct ($dir) {
		#/Users/ut/Documents/LAB/ufront-mvc/src/ufront/remoting/RemotingSerializer.hx:27: characters 3-10
		parent::__construct();
		#/Users/ut/Documents/LAB/ufront-mvc/src/ufront/remoting/RemotingSerializer.hx:28: characters 3-23
		$this->direction = $dir;
		#/Users/ut/Documents/LAB/ufront-mvc/src/ufront/remoting/RemotingSerializer.hx:29: characters 18-37
		$this1 = new StringMap();
		#/Users/ut/Documents/LAB/ufront-mvc/src/ufront/remoting/RemotingSerializer.hx:29: characters 3-37
		$this->uploads = $this1;
	}
}


Boot::registerClass(RemotingSerializer::class, 'ufront.remoting.RemotingSerializer');
