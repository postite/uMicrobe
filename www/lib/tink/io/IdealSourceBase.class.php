<?php

// Generated by Haxe 3.4.7
class tink_io_IdealSourceBase extends tink_io_SourceBase implements tink_io_IdealSourceObject{
	public function idealize($onError) {
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::idealize");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$GLOBALS['%s']->pop();
			return $this;
		}
		$GLOBALS['%s']->pop();
	}
	public function allSafely() {
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::allSafely");
		$__hx__spos = $GLOBALS['%s']->length;
		$_gthis = $this;
		{
			$tmp = tink_core__Future_Future_Impl_::async(array(new _hx_lambda(array(&$_gthis), "tink_io_IdealSourceBase_0"), 'execute'), null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	public function all() {
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::all");
		$__hx__spos = $GLOBALS['%s']->length;
		$this1 = $this->allSafely();
		$ret = $this1->map((property_exists("tink_core_Outcome", "Success") ? tink_core_Outcome::$Success: array("tink_core_Outcome", "Success")));
		{
			$tmp = $ret->gather();
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	public function readSafely($into, $max = null) {
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::readSafely");
		$__hx__spos = $GLOBALS['%s']->length;
		if($max === null) {
			$max = 268435456;
		}
		throw new HException("abstract");
		$GLOBALS['%s']->pop();
	}
	public function closeSafely() {
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::closeSafely");
		$__hx__spos = $GLOBALS['%s']->length;
		throw new HException("abstract");
		$GLOBALS['%s']->pop();
	}
	public function close() {
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::close");
		$__hx__spos = $GLOBALS['%s']->length;
		$this1 = $this->closeSafely();
		$ret = $this1->map((property_exists("tink_core_Outcome", "Success") ? tink_core_Outcome::$Success: array("tink_core_Outcome", "Success")));
		{
			$tmp = $ret->gather();
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	public function read($into, $max = null) {
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::read");
		$__hx__spos = $GLOBALS['%s']->length;
		if($max === null) {
			$max = 268435456;
		}
		$this1 = $this->readSafely($into, $max);
		$ret = $this1->map((property_exists("tink_core_Outcome", "Success") ? tink_core_Outcome::$Success: array("tink_core_Outcome", "Success")));
		{
			$tmp = $ret->gather();
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	public function pipeSafelyTo($dest, $options = null) {
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::pipeSafelyTo");
		$__hx__spos = $GLOBALS['%s']->length;
		$_gthis = $this;
		{
			$tmp = tink_core__Future_Future_Impl_::async(array(new _hx_lambda(array(&$_gthis, &$dest, &$options), "tink_io_IdealSourceBase_1"), 'execute'), null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	function __toString() { return 'tink.io.IdealSourceBase'; }
}
function tink_io_IdealSourceBase_0(&$_gthis, $cb) {
	{
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::allSafely@177");
		$__hx__spos = $GLOBALS['%s']->length;
		$this1 = tink_io__IdealSink_IdealSink_Impl_::inMemory(array(new _hx_lambda(array(&$cb), "tink_io_IdealSourceBase_2"), 'execute'), null);
		$_gthis->pipeSafelyTo($this1, _hx_anonymous(array("end" => true)));
		$GLOBALS['%s']->pop();
	}
}
function tink_io_IdealSourceBase_1(&$_gthis, &$dest, &$options, $cb) {
	{
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::pipeSafelyTo@200");
		$__hx__spos = $GLOBALS['%s']->length;
		$this1 = $_gthis;
		tink_io_Pipe::make($this1, $dest, null, $options, array(new _hx_lambda(array(&$cb), "tink_io_IdealSourceBase_3"), 'execute'));
		$GLOBALS['%s']->pop();
	}
}
function tink_io_IdealSourceBase_2(&$cb, $buf) {
	{
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::pipeSafelyTo@178");
		$__hx__spos = $GLOBALS['%s']->length;
		$s = $buf->getBytes();
		call_user_func_array($cb, array($s));
		$GLOBALS['%s']->pop();
	}
}
function tink_io_IdealSourceBase_3(&$cb, $_, $res) {
	{
		$GLOBALS['%s']->push("tink.io.IdealSourceBase::pipeSafelyTo@200");
		$__hx__spos = $GLOBALS['%s']->length;
		call_user_func_array($cb, array($res));
		$GLOBALS['%s']->pop();
	}
}
