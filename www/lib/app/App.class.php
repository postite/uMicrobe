<?php

// Generated by Haxe 3.4.7
class app_App {
	public function __construct() { if(!php_Boot::$skip_constructor) {
		$GLOBALS['%s']->push("app.App::new");
		$__hx__spos = $GLOBALS['%s']->length;
		haxe_Log::trace("yoo", _hx_anonymous(array("fileName" => "App.hx", "lineNumber" => 21, "className" => "app.App", "methodName" => "new")));
		$GLOBALS['%s']->pop();
	}}
	static $ufApp;
	static function main() {
		$GLOBALS['%s']->push("app.App::main");
		$__hx__spos = $GLOBALS['%s']->length;
		$tmp = ufront_view_TemplatingEngines::get_haxe();
		app_App::$ufApp = new ufront_app_UfrontApplication(_hx_anonymous(array("indexController" => _hx_qtype("microbe.control.HomeController"), "remotingApi" => _hx_qtype("app.Apis"), "logFile" => "logs/app.log", "templatingEngines" => (new _hx_array(array($tmp, ufront_view_TemplatingEngines::get_erazor()))), "defaultLayout" => "layout.html")));
		app_App::inject();
		app_App::run();
		$GLOBALS['%s']->pop();
	}
	static function run() {
		$GLOBALS['%s']->push("app.App::run");
		$__hx__spos = $GLOBALS['%s']->length;
		try {
			$cnx = sys_db_Sqlite::open("table.db");
			sys_db_Transaction::main($cnx, array(new _hx_lambda(array(), "app_App_0"), 'execute'), null);
		}catch(Exception $__hx__e) {
			$_ex_ = ($__hx__e instanceof HException) && $__hx__e->getCode() == null ? $__hx__e->e : $__hx__e;
			$msg = $_ex_;
			{
				$GLOBALS['%e'] = (new _hx_array(array()));
				while($GLOBALS['%s']->length >= $__hx__spos) {
					$GLOBALS['%e']->unshift($GLOBALS['%s']->pop());
				}
				$GLOBALS['%s']->push($GLOBALS['%e'][0]);
				throw new HException($msg);
			}
		}
		$GLOBALS['%s']->pop();
	}
	static function inject() {
		$GLOBALS['%s']->push("app.App::inject");
		$__hx__spos = $GLOBALS['%s']->length;
		$m = (new _hx_array(array(_hx_qtype("microbe.model.Article"), _hx_qtype("microbe.vo.FakeVo"))));
		$models = Lambda::map($m, array(new _hx_lambda(array(), "app_App_1"), 'execute'));
		app_App::$ufApp->injector->mapType("List<Dynamic>", "models", null)->toValue($models);
		microbe_MicrobeInjector::inject(app_App::$ufApp->injector);
		app_App::$ufApp->injector->mapType("String", "basePath", null)->toValue("http://localhost:8888");
		app_App::$ufApp->injector->mapType("middleware.ResponseSignal", null, null)->asSingleton();
		$GLOBALS['%s']->pop();
	}
	function __toString() { return 'app.App'; }
}
function app_App_0() {
	{
		$GLOBALS['%s']->push("app.App::run@94");
		$__hx__spos = $GLOBALS['%s']->length;
		app_App::$ufApp->executeRequest();
		$GLOBALS['%s']->pop();
	}
}
function app_App_1($n) {
	{
		$GLOBALS['%s']->push("app.App::inject@116");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$tmp = _hx_anonymous(array("name" => Type::getClassName($n)));
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
}
