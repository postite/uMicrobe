<?php
/**
 * Generated by Haxe 4.0.0 (git build development @ da28365)
 * Haxe source file: /usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx
 */

namespace sys;

use \haxe\io\Path;
use \php\Boot;
use \php\_Boot\HxException;
use \sys\_FileSystem\FileKind;
use \php\_Boot\HxAnon;

/**
 * This class allows you to get information about the files and directories.
 * See `sys.io.File` for the complementary file API.
 */
class FileSystem {
	/**
	 * Returns the full path of the file or directory specified by `relPath`,
	 * which is relative to the current working directory. The path doesn't
	 * have to exist.
	 * If `relPath` is null, the result is unspecified.
	 * 
	 * @param string $relPath
	 * 
	 * @return string
	 */
	static public function absolutePath ($relPath) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:69: characters 3-47
		if (Path::isAbsolute($relPath)) {
			#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:69: characters 33-47
			return $relPath;
		}
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:70: characters 3-44
		return Path::join(\Array_hx::wrap([
			\Sys::getCwd(),
			$relPath,
		]));
	}


	/**
	 * Creates a directory specified by `path`.
	 * This method is recursive: The parent directories don't have to exist.
	 * If the directory cannot be created, an exception is thrown.
	 * If `path` is null, the result is unspecified.
	 * 
	 * @param string $path
	 * 
	 * @return void
	 */
	static public function createDirectory ($path) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:89: lines 89-90
		if (!is_dir($path)) {
			#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:90: characters 4-33
			mkdir($path, 493, true);
		}
	}


	/**
	 * Deletes the directory specified by `path`.
	 * If `path` does not denote a valid directory, or if that directory cannot
	 * be deleted, an exception is thrown.
	 * If `path` is null, the result is unspecified.
	 * 
	 * @param string $path
	 * 
	 * @return void
	 */
	static public function deleteDirectory ($path) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:98: characters 3-21
		rmdir($path);
	}


	/**
	 * Deletes the file specified by `path`.
	 * If `path` does not denote a valid file, or if that file cannot be
	 * deleted, an exception is thrown.
	 * If `path` is null, the result is unspecified.
	 * 
	 * @param string $path
	 * 
	 * @return void
	 */
	static public function deleteFile ($path) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:94: characters 3-22
		unlink($path);
	}


	/**
	 * Tells if the file or directory specified by `path` exists.
	 * If `path` is null, the result is unspecified.
	 * 
	 * @param string $path
	 * 
	 * @return bool
	 */
	static public function exists ($path) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:37: characters 3-34
		return file_exists($path);
	}


	/**
	 * Returns the full path of the file or directory specified by `relPath`,
	 * which is relative to the current working directory. Symlinks will be
	 * followed and the path will be normalized.
	 * If `relPath` is null, the result is unspecified.
	 * 
	 * @param string $relPath
	 * 
	 * @return string
	 */
	static public function fullPath ($relPath) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:65: characters 10-61
		return (realpath($relPath) ?: null);
	}


	/**
	 * Tells if the file or directory specified by `path` is a directory.
	 * If `path` is not a valid file system entry or if its destination is not
	 * accessible, an exception is thrown.
	 * If `path` is null, the result is unspecified.
	 * 
	 * @param string $path
	 * 
	 * @return bool
	 */
	static public function isDirectory ($path) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:85: characters 3-29
		return is_dir($path);
	}


	/**
	 * @param string $path
	 * 
	 * @return FileKind
	 */
	static public function kind ($path) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:74: characters 3-36
		$kind = filetype($path);
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:75: characters 3-27
		if ($kind === false) {
			#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:75: characters 22-27
			throw new HxException("Failed to check file type " . ($path??'null'));
		}
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:77: lines 77-81
		switch ($kind) {
			case "dir":
				#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:79: characters 16-27
				return FileKind::kdir();
				break;
			case "file":
				#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:78: characters 17-29
				return FileKind::kfile();
				break;
			default:
				#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:80: characters 13-32
				return FileKind::kother($kind);
				break;
		}
	}


	/**
	 * Returns the names of all files and directories in the directory specified
	 * by `path`.
	 * If `path` does not denote a valid directory, an exception is thrown.
	 * If `path` is null, the result is unspecified.
	 * 
	 * @param string $path
	 * 
	 * @return \Array_hx
	 */
	static public function readDirectory ($path) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:102: characters 3-17
		$list = new \Array_hx();
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:103: characters 3-34
		$dir = opendir($path);
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:104: characters 3-12
		$file = null;
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:105: lines 105-109
		while (true) {
			#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:105: characters 10-38
			$file = readdir($dir);
			#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:105: lines 105-109
			if (!($file !== false)) {
				#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:105: lines 105-109
				break;
			}
			#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:106: lines 106-108
			if (($file !== ".") && ($file !== "..")) {
				#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:107: characters 5-20
				$list->arr[$list->length] = $file;
				#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:107: characters 5-20
				++$list->length;
			}
		}
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:110: characters 3-23
		closedir($dir);
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:111: characters 9-20
		return $list;
	}


	/**
	 * Renames/moves the file or directory specified by `path` to `newPath`.
	 * If `path` is not a valid file system entry, or if it is not accessible,
	 * or if `newPath` is not accessible, an exception is thrown.
	 * If `path` or `newPath` are null, the result is unspecified.
	 * 
	 * @param string $path
	 * @param string $newPath
	 * 
	 * @return void
	 */
	static public function rename ($path, $newPath) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:41: characters 3-31
		rename($path, $newPath);
	}


	/**
	 * Returns `FileStat` information on the file or directory specified by
	 * `path`.
	 * If `path` is null, the result is unspecified.
	 * 
	 * @param string $path
	 * 
	 * @return object
	 */
	static public function stat ($path) {
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:45: characters 3-32
		$info = stat($path);
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:46: characters 3-27
		if ($info === false) {
			#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:46: characters 22-27
			throw new HxException("Unable to stat " . ($path??'null'));
		}
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:47: characters 3-31
		$info1 = $info;
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:52: characters 12-47
		$tmp = \Date::fromTime($info1["atime"] * 1000);
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:53: characters 12-47
		$tmp1 = \Date::fromTime($info1["mtime"] * 1000);
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:54: characters 12-47
		$tmp2 = \Date::fromTime($info1["ctime"] * 1000);
		#/usr/local/lib/haxe/std/php/_std/sys/FileSystem.hx:49: lines 49-61
		return new HxAnon([
			"gid" => $info1["gid"],
			"uid" => $info1["uid"],
			"atime" => $tmp,
			"mtime" => $tmp1,
			"ctime" => $tmp2,
			"dev" => $info1["dev"],
			"ino" => $info1["ino"],
			"nlink" => $info1["nlink"],
			"rdev" => $info1["rdev"],
			"size" => $info1["size"],
			"mode" => $info1["mode"],
		]);
	}
}


Boot::registerClass(FileSystem::class, 'sys.FileSystem');
