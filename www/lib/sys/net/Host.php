<?php
/**
 * Generated by Haxe 4.0.0 (git build development @ da28365)
 * Haxe source file: /usr/local/lib/haxe/std/php/_std/sys/net/Host.hx
 */

namespace sys\net;

use \php\Boot;

/**
 * A given IP host name.
 */
class Host {
	/**
	 * @var string
	 */
	public $_ip;
	/**
	 * @var string
	 * The provided host string.
	 */
	public $host;
	/**
	 * @var int
	 * The actual IP corresponding to the host.
	 */
	public $ip;


	/**
	 * Returns the local computer host name
	 * 
	 * @return string
	 */
	static public function localhost () {
		#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:59: characters 10-30
		return $_SERVER["HTTP_HOST"];
	}


	/**
	 * Creates a new Host : the name can be an IP in the form "127.0.0.1" or an host name such as "google.com", in which case
	 * the corresponding IP address is resolved using DNS. An exception occur if the host name could not be found.
	 * 
	 * @param string $name
	 * 
	 * @return void
	 */
	public function __construct ($name) {
		#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:36: characters 3-14
		$this->host = $name;
		#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:37: lines 37-45
		if ((new \EReg("^(\\d{1,3}\\.){3}\\d{1,3}\$", ""))->match($name)) {
			#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:38: characters 5-15
			$this->_ip = $name;
		} else {
			#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:40: characters 4-29
			$this->_ip = gethostbyname($name);
			#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:41: lines 41-44
			if ($this->_ip === $name) {
				#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:42: characters 5-11
				$this->ip = 0;
				#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:43: characters 5-11
				return;
			}
		}
		#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:46: characters 11-25
		$_this = $this->_ip;
		#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:46: characters 3-26
		$p = \Array_hx::wrap(explode(".", $_this));
		#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:47: characters 3-71
		$this->ip = intval(sprintf("%02X%02X%02X%02X", ($p->arr[3] ?? null), ($p->arr[2] ?? null), ($p->arr[1] ?? null), ($p->arr[0] ?? null)), 16);
	}


	/**
	 * Perform a reverse-DNS query to resolve a host name from an IP.
	 * 
	 * @return string
	 */
	public function reverse () {
		#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:55: characters 3-28
		return gethostbyaddr($this->_ip);
	}


	/**
	 * Returns the IP representation of the host
	 * 
	 * @return string
	 */
	public function toString () {
		#/usr/local/lib/haxe/std/php/_std/sys/net/Host.hx:51: characters 3-13
		return $this->_ip;
	}


	public function __toString() {
		return $this->toString();
	}
}


Boot::registerClass(Host::class, 'sys.net.Host');
